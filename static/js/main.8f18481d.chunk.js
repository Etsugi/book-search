(this["webpackJsonpbook-search"]=this["webpackJsonpbook-search"]||[]).push([[0],{19:function(e,o,t){},28:function(e,o,t){"use strict";t.r(o);var n=t(1),a=t.n(n),r=t(6),c=t.n(r),s=(t(19),t.p+"static/media/book.77a36a3b.png"),i=t(5),p=t(2),u="GET_BOOKS",b="BOOK_POPUP_OPEN",l="BOOK_POPUP_CLOSE",d="PRELOADER_SHOW",j="PRELOADER_HIDE";var O=t(11),h=t.n(O),k=t(13),m="https://openlibrary.org";function f(){return(f=Object(k.a)(h.a.mark((function e(o){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/search.json?q=").concat(o),{method:"GET"}).then((function(e){return _(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return e.ok?e.json():e.status}var v={searchBooks:function(e){return f.apply(this,arguments)}},x=t(0);var g={getBooks:function(e,o){return{type:u,payload:{books:e,input:o}}},preloaderShow:function(e){return{type:d,payload:e}},preloaderHide:function(e){return{type:j,payload:e}}},y=Object(p.b)(null,g)((function(e){var o=a.a.useState(""),t=Object(i.a)(o,2),n=t[0],r=t[1],c=a.a.useState(!1),s=Object(i.a)(c,2),p=s[0],u=s[1];function b(){if(0!==n.length){var e=setTimeout(l,2e3);u(e)}}function l(){j(n),u(!1)}function d(e){e.preventDefault(),clearTimeout(p),j(n)}function j(o){0!==o.trim().length?(e.preloaderShow(),v.searchBooks(o).then((function(t){e.getBooks(t.docs,o)})).catch((function(e){console.log(e)})).finally((function(){e.preloaderHide()}))):e.getBooks([],o)}return a.a.useEffect((function(){!1===p||clearTimeout(p),b()}),[n]),Object(x.jsxs)("form",{className:"search-form",onSubmit:d,noValidate:!0,children:[Object(x.jsx)("input",{className:"search-form__input",placeholder:"\u041a\u043d\u0438\u0433\u0430, \u0430\u0432\u0442\u043e\u0440",onChange:function(e){r(e.target.value)},autoFocus:!0}),Object(x.jsx)("button",{className:"search-form__button-submit",onClick:d,children:"\u041d\u0430\u0439\u0442\u0438"})]})}));var N=function(e){return Object(x.jsxs)("header",{className:"header",children:[Object(x.jsx)("img",{className:"header__logo",src:s,alt:"\u041b\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430"}),Object(x.jsx)(y,{})]})},w=t.p+"static/media/no-image.47f63503.jpg";var P={bookPopupOpen:function(e,o){return{type:b,payload:{book:e,image:o}}}},E=Object(p.b)(null,P)((function(e){var o=e.book.author_name||"\u0410\u0432\u0442\u043e\u0440 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d",t=e.book.title||"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",n=function(){if(e.book.cover_i)return"https://covers.openlibrary.org/b/id/".concat(e.book.cover_i,"-M.jpg");return e.book.isbn?"https://covers.openlibrary.org/b/isbn/".concat(e.book.isbn[0],"-M.jpg"):w}();return Object(x.jsxs)("div",{className:"book-card",children:[Object(x.jsx)("img",{className:"book-card__image",alt:t,src:n}),Object(x.jsx)("p",{className:"book-card__title",children:t}),Object(x.jsx)("p",{className:"book-card__author",children:o}),Object(x.jsx)("div",{onClick:function(){e.bookPopupOpen(e.book,n)},className:"book-card__overlay"})]})}));var S=function(e){return Object(x.jsx)("div",{className:"preloader",children:Object(x.jsx)("span",{className:"preloader__round"})})},C="\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",B="\u0412\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u043f\u043e\u0438\u0441\u043a\u043e\u043c";function W(){return window.innerWidth<636?1:window.innerWidth<1280?2:window.innerWidth<1668?3:window.innerWidth<2056?4:window.innerWidth<2444?5:6}var D=W();window.addEventListener("resize",W);var T=4*D===4?5:4*D;var F=Object(p.b)((function(e){return{books:e.books.books,input:e.books.input,preloader:e.preloader.preloader}}),null)((function(e){var o=a.a.useState(B),t=Object(i.a)(o,2),n=t[0],r=t[1],c=a.a.useState(T),s=Object(i.a)(c,2),p=s[0],u=s[1];return a.a.useEffect((function(){0!==e.input.length?r(C):r(B)}),[e.books]),Object(x.jsx)(x.Fragment,{children:e.preloader?Object(x.jsx)(S,{}):Object(x.jsx)(x.Fragment,{children:0===e.books.length?Object(x.jsx)("p",{className:"books-card-list__not-found",children:n}):Object(x.jsxs)("div",{className:"books-card-list",children:[Object(x.jsx)("div",{className:"books-card-list__container",children:e.books.slice(0,p).map((function(e){return Object(x.jsx)(E,{book:e},e.key||e.cover_i)}))}),Object(x.jsx)("button",{onClick:function(){u(p+(1===D?2:D))},className:0!==e.books.slice(p).length?"books-card-list__button":"books-card-list__button books-card-list__button_disabled",type:"button",children:"\u0415\u0449\u0451"})]})})})}));var R={bookPopupClose:function(e){return{type:l,payload:e}}},H=Object(p.b)((function(e){return{book:e.bookPopup.book,image:e.bookPopup.image,popupOpen:e.bookPopup.popupOpen}}),R)((function(e){return Object(x.jsxs)("div",{className:!0===e.popupOpen?"popup popup_opened":"popup",children:[Object(x.jsxs)("div",{className:"popup__container",children:[Object(x.jsx)("img",{className:"popup__image",alt:e.book.title,src:e.image}),Object(x.jsx)("p",{className:"popup__text",children:e.book.title}),Object(x.jsx)("p",{className:"popup__text",children:e.book.author_name}),Object(x.jsx)("p",{className:"popup__text",children:e.book.first_publish_year}),Object(x.jsx)("p",{className:"popup__text",children:e.book.publisher?e.book.publisher[0]:"\u0418\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"}),Object(x.jsx)("p",{className:"popup__text",children:e.book.isbn?e.book.isbn[0]:""}),Object(x.jsx)("button",{type:"button",onClick:e.bookPopupClose,className:"popup__button-close"})]}),Object(x.jsx)("div",{onClick:e.bookPopupClose,className:"popup__overlay"})]})})),L=(new Date).getFullYear();var K=function(){return Object(x.jsx)("footer",{className:"footer",children:Object(x.jsxs)("time-datetime",{class:"footer__copyright",children:["\xa9 ",L," \u041a\u0438\u043f\u0440\u0438\u043d \u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0438\u043d"]})})};var M=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N,{}),Object(x.jsx)(F,{}),Object(x.jsx)(K,{}),Object(x.jsx)(H,{})]})},A=t(4),G={books:[],input:""};var I=t(3),J={book:{},image:"",popupOpen:!1};var U={preloader:!1};var q=Object(A.combineReducers)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case u:return o.payload;default:return e}},bookPopup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case b:return Object(I.a)(Object(I.a)({},e),{},{book:o.payload.book,image:o.payload.image,popupOpen:!0});case l:return Object(I.a)(Object(I.a)({},e),{},{book:e.book,image:e.image,popupOpen:!1});default:return e}},preloader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case j:return Object(I.a)(Object(I.a)({},e),{},{preloader:!1});case d:return Object(I.a)(Object(I.a)({},e),{},{preloader:!0});default:return e}}}),z=t(14),V=Object(A.createStore)(q,Object(z.composeWithDevTools)());c.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(p.a,{store:V,children:Object(x.jsx)(M,{})})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.8f18481d.chunk.js.map